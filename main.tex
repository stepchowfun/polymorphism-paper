\documentclass[acmlarge]{acmart}

\usepackage{booktabs} % For formal tables
\usepackage{bussproofs}
\usepackage{amssymb}
\usepackage{mdframed}
\usepackage{mathtools}

\usepackage[ruled]{algorithm2e} % For algorithms
\renewcommand{\algorithmcfname}{ALGORITHM}
\SetAlFnt{\small}
\SetAlCapFnt{\small}
\SetAlCapNameFnt{\small}
\SetAlCapHSkip{0pt}
\IncMargin{-\parindent}

% Metadata Information
\acmJournal{PACMPL}
\acmVolume{22}
\acmNumber{4}
\acmArticle{39}
\acmYear{2017}
\acmMonth{3}
\acmArticleSeq{11}

%\acmBadgeR[http://ctuning.org/ae/ppopp2016.html]{ae-logo}
%\acmBadgeL[http://ctuning.org/ae/ppopp2016.html]{ae-logo}


% Copyright
\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\setcopyright{usgov}
%\setcopyright{usgovmixed}
%\setcopyright{cagov}
%\setcopyright{cagovmixed}

% DOI
\acmDOI{0000001.0000001}

% Paper history
\received{February 2017}


% Misc
\newcommand\lambdaarobase{\lambda_@}
\newcommand\entails[2]{#1 \vdash #2}
\newcommand\hastype[2]{#1 : #2}
\newcommand\evalsto[2]{#1 \longrightarrow #2}
\newcommand\freevars[1]{\text{free} \left( #1 \right)}
\newcommand\generalize[3]{\text{gen}\left( #1, #2, #3 \right)}
\newcommand\sub[3]{#1 \left[ #2 \mapsto #3 \right]}

% Terms
\newcommand\labs[2]{\lambda #1 \ . \ #2}
\newcommand\app[2]{#1 \ #2}
\newcommand\llet[3]{\text{let } #1 = #2 \text{ in } #3}
\newcommand\provide[2]{\text{provide } #1 \text{ in } #2}

% Types
\newcommand\larrow[2]{#1 \rightarrow #2}
\newcommand\tabs[3]{\forall #1 \ . \ #2 \Rightarrow #3}


% Document starts
\begin{document}
% Title portion
\title{Deconstructing Type Classes into Orthogonal Language Features}
\author{Stephan Boyer}
\orcid{1234-5678-9012-3456}
\affiliation{%
  \institution{Airbnb, Inc.}
  \streetaddress{888 Brannan St.}
  \city{San Francisco}
  \state{CA}
  \postcode{94134}
  \country{USA}
}
\author{Esther Wang}
\affiliation{%
  \institution{Airbnb, Inc.}
  \streetaddress{888 Brannan St.}
  \city{San Francisco}
  \state{CA}
  \postcode{94134}
  \country{USA}
}


\begin{abstract}
  We introduce $\lambdaarobase$.
\end{abstract}


%
% The code below should be generated by the tool at
% http://dl.acm.org/ccs.cfm
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10003752.10010124.10010125.10010127</concept_id>
<concept_desc>Theory of computation~Functional constructs</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10003752.10010124.10010125.10010130</concept_id>
<concept_desc>Theory of computation~Type structures</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10003752.10010124.10010125.10010129</concept_id>
<concept_desc>Theory of computation~Program schemes</concept_desc>
<concept_significance>300</concept_significance>
</concept>
<concept>
<concept_id>10003752.10010124.10010131.10010134</concept_id>
<concept_desc>Theory of computation~Operational semantics</concept_desc>
<concept_significance>100</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Theory of computation~Functional constructs}
\ccsdesc[500]{Theory of computation~Type structures}
\ccsdesc[300]{Theory of computation~Program schemes}
\ccsdesc[100]{Theory of computation~Operational semantics}

%
% End generated code
%

% We no longer use \terms command
\terms{}

\keywords{Ad hoc polymorphism, Implicit parameters, Type classes}


\thanks{
}


\maketitle

\section{Introduction}

  We introduce $\lambdaarobase$.

\section{Implicit parameters}

  \begin{figure}[h!]
    \begin{mdframed}

      \begin{tabular}{l l l}
        $t \Coloneqq $ & & (term) \\
        & $x$ & (variable) \\
        & $\labs{x}{t}$ & (abstraction) \\
        & $\app{t}{t}$ & (application) \\
        & $\llet{x}{t}{t}$ & (let binding) \\
        & $\provide{t}{t}$ & (provide binding) \\
        & $@$ & (implicit parameter)
      \end{tabular}

    \end{mdframed}
    \caption{Syntax of terms}
    \label{fig:terms_syntax}
  \end{figure}

  \begin{figure}[h!]
    \begin{mdframed}

      \begin{tabular}{l l l}
        $\tau \Coloneqq$ & & (monomorphic type) \\
        & $\larrow{\tau}{\tau}$ & (arrow type) \\
        & $\alpha$ & (type variable) \\
        $\sigma \Coloneqq$ & & (polymorphic type) \\
        & $\tau$ & (monomorphic type) \\
        & $\tabs{\overline{\alpha}}{\Delta}{\tau}$ & (universal type) \\
        $\overline{\alpha} \Coloneqq$ & & (quantified type variables) \\
        & $\epsilon$ & (empty quantification) \\
        & $\alpha, \overline{\alpha}$ & (type variable cons) \\
        $\Delta \Coloneqq$ & & (implicit context) \\
        & $\epsilon$ & (empty context) \\
        & $\tau, \Delta$ & (context cons)
      \end{tabular}

    \end{mdframed}
    \caption{Syntax of types}
    \label{fig:types_syntax}
  \end{figure}

  \begin{figure}[h!]
    \begin{mdframed}

      \begin{prooftree}
          \AxiomC{}
        \RightLabel{(\textsc{R-Reflexivity})}
        \UnaryInfC{$\Delta \sqsubseteq \Delta$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\Delta_1 \sqsubseteq \Delta_2$}
          \AxiomC{$\Delta_2 \sqsubseteq \Delta_3$}
        \RightLabel{(\textsc{R-Transitivity})}
        \BinaryInfC{$\Delta_1 \sqsubseteq \Delta_3$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{}
        \RightLabel{(\textsc{R-Contraction})}
        \UnaryInfC{$\tau, \tau, \Delta \sqsubseteq \tau, \Delta$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{}
        \RightLabel{(\textsc{R-Weakening})}
        \UnaryInfC{$\Delta \sqsubseteq \tau, \Delta$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\tau_1, \epsilon \sqsubseteq \Delta_2$}
          \AxiomC{$\tau_2, \epsilon \sqsubseteq \Delta_1$}
          \AxiomC{$\tau_2, \sub{\Delta_1}{\tau_2}{\tau_1} \sqsubseteq \tau_1, \sub{\Delta_2}{\tau_1}{\tau_2}$}
        \RightLabel{(\textsc{R-Permutation})}
        \TrinaryInfC{$\tau_1, \Delta_1 \sqsubseteq \tau_2, \Delta_2$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\Delta_1 \sqsubseteq \sub{\tau}{\overline{\alpha}}{\overline{\tau}}, \Delta_2$}
          \AxiomC{$\tabs{\overline{\alpha}}{\Delta_3}{\tau}, \sub{\Delta_3}{\overline{\alpha}}{\overline{\tau}} \sqsubseteq \Delta_2$}
        \RightLabel{(\textsc{R-Detachment})}
        \BinaryInfC{$\Delta_1 \sqsubseteq \Delta_2$}
      \end{prooftree}

    \end{mdframed}
    \caption{Preorder on implicit contexts}
    \label{fig:types_syntax}
  \end{figure}

  \begin{figure}[h!]
    \begin{mdframed}

      \begin{prooftree}
          \AxiomC{$\hastype{x}{\tabs{\overline{\alpha_1}}{\Delta_1}{\tau_1}} \in \Gamma$}
          \AxiomC{$\Delta_1 \sqsubseteq \Delta_2$}
        \RightLabel{(\textsc{T-Variable})}
        \BinaryInfC{$\entails{\Delta_2; \Gamma}{\hastype{x}{\sub{\tau_1}{\overline{\alpha_1}}{\overline{\tau_1}}}}$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\entails{\Delta; \Gamma, \hastype{x}{\tabs{\epsilon}{\epsilon}{\tau_1}}}{\hastype{t}{\tau_2}}$}
        \RightLabel{(\textsc{T-Abstraction})}
        \UnaryInfC{$\entails{\Delta; \Gamma}{\hastype{\labs{x}{t}}{\larrow{\tau_1}{\tau_2}}}$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\entails{\Delta; \Gamma}{\hastype{t_1}{\larrow{\tau_2}{\tau_1}}}$}
          \AxiomC{$\entails{\Delta; \Gamma}{\hastype{t_2}{\tau_2}}$}
        \RightLabel{(\textsc{T-Application})}
        \BinaryInfC{$\entails{\Delta; \Gamma}{\hastype{\app{t_1}{t_2}}{\tau_1}}$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\entails{\Delta_2; \Gamma}{\hastype{t_1}{\tau_1}}$}
          \AxiomC{$\entails{\Delta_1; \Gamma, \hastype{x}{\generalize{\Delta_2}{\Gamma}{\tau_1}}}{\hastype{t_2}{\tau_2}}$}
        \RightLabel{(\textsc{T-Let})}
        \BinaryInfC{$\entails{\Delta_1; \Gamma}{\hastype{\llet{x}{t_1}{t_2}}{\tau_2}}$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\entails{\Delta; \Gamma}{\hastype{t_1}{\tau_1}}$}
          \AxiomC{$\entails{\tau_1, \Delta; \Gamma}{\hastype{t_2}{\tau_2}}$}
        \RightLabel{(\textsc{T-Provide})}
        \BinaryInfC{$\entails{\Delta; \Gamma}{\hastype{\provide{t_1}{t_2}}{\tau_2}}$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\tau, \Delta_1 \sqsubseteq \Delta_2$}
        \RightLabel{(\textsc{T-Implicit})}
        \UnaryInfC{$\entails{\Delta_2; \Gamma}{\hastype{@}{\tau}}$}
      \end{prooftree}

      \[ \generalize{\Delta}{\Gamma}{\tau} = \tabs{\overline{\alpha}}{\Delta}{\tau} \qquad \text{where } \overline{\alpha} = \left( \freevars{\Delta}, \freevars{\tau} \right) \setminus \freevars{\Gamma} \]

    \end{mdframed}
    \caption{Typing rules}
    \label{fig:typing_rules}
  \end{figure}

  \begin{figure}[h!]
    \begin{mdframed}

      \begin{prooftree}
          \AxiomC{$\evalsto{t_1}{t_1'}$}
        \RightLabel{(\textsc{E-App1})}
        \UnaryInfC{$\evalsto{\app{t_1}{t_2}}{\app{t'_1}{t_2}}$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{$\evalsto{t}{t'}$}
        \RightLabel{(\textsc{E-App2})}
        \UnaryInfC{$\evalsto{\app{v}{t}}{\app{v}{t'}}$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{}
        \RightLabel{(\textsc{E-AppAbs})}
        \UnaryInfC{$\evalsto{\app{\left(\labs{x}{t}\right)}{v}}{\sub{t}{x}{v}}$}
      \end{prooftree}

      \begin{prooftree}
          \AxiomC{}
        \RightLabel{(\textsc{E-Let})}
        \UnaryInfC{$\evalsto{\llet{x}{v}{t}}{\sub{t}{x}{v}}$}
      \end{prooftree}

    \end{mdframed}
    \caption{Operational semantics}
    \label{fig:semantics}
  \end{figure}

\section{Conclusion}

Hello, World!

\begin{acks}

Hello, World!

\end{acks}

% Bibliography
\bibliographystyle{ACM-Reference-Format}
\bibliography{bibliography}



\end{document}
